<!DOCTYPE html>
<html lang="en">

<head>

	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<!-- Bootstrap Core CSS -->
	<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet">
	<link href="css/business-casual.css" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">
	<link href="https://fonts.googleapis.com/css?family=Josefin+Slab:100,300,400,600,700,100italic,300italic,400italic,600italic,700italic" rel="stylesheet" type="text/css">
</head>

<body>

	<div class="brand">HealthVisor Web Platform</div>
	<div class="address-bar">James Spencer | Brian Goldwyn | Andrew Pastore</div>

	<!-- Navigation -->
	<nav class="navbar navbar-default" role="navigation">
		<div class="container">
			<!-- Brand and toggle get grouped for better mobile display -->
			<div class="navbar-header">
				<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
					<span class="sr-only">Toggle navigation</span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
				</button>
				<!-- navbar-brand is hidden on larger screens, but visible when the menu is collapsed -->
				<a class="navbar-brand" href="index.html">HealthVisor</a>
			</div>
			<!-- Collect the nav links, forms, and other content for toggling -->
			<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
				<ul class="nav navbar-nav">
					<li>
						<a href="" data-toggle="modal" data-target="#myModal" id="nav-login">Login</a>
					</li>
					<li>
						<a href="" data-toggle="modal" data-target="#reg-modal" id="nav-register">Register</a>
					</li>
					<li>
						<a href="" id="nav-logout" style="display: none">Logout</a>
					</li>
					<li>
						<a href="">Help</a>
					</li>
					<li>
						<a href="">Contact</a>
					</li>
				</ul>
			</div>
			<!-- /.navbar-collapse -->
		</div>
		<!-- /.container -->
	</nav>

	<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
		<div class="modal-dialog">
	<div class="modal-content">
	  <div class="modal-header">
		<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
		<h4 class="modal-title">User Login</h4>
	  </div>
	  <div class="modal-body">
		<form>
		  <div class="form-group">
			<label for="exampleInputEmail1">Email address</label>
			<input type="email" class="form-control" id="exampleInputEmail1" placeholder="Email">
		</div>
		<div class="form-group">
			<label for="exampleInputPassword1">Password</label>
			<input type="password" class="form-control" id="exampleInputPassword1" placeholder="Password">
		</div>
		<div class="form-group">
  			<label for="sel1">Choose Account Type:</label>
  			<select class="form-control" id="sel1">
    			<option>Patient</option>
    			<option>Physician</option>
  			</select>
		</div>
		<div class="form-group">
			<font color="red" id="error"></font>
		</div>
		</form>
	  </div>
	  <div class="modal-footer">
		<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
		<button type="button" class="btn btn-primary" id="login">Submit</button>
	  </div>
		</div><!-- /.modal-content -->
		</div><!-- /.modal-dialog -->
	</div><!-- /.modal -->

	<div class="modal fade" id="reg-modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
		<div class="modal-dialog">
	<div class="modal-content">
	  <div class="modal-header">
		<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
		<h4 class="modal-title">Registration</h4>
	  </div>
	  <div class="modal-body">
		<form>
		<div class="form-group">
			<label for="firstname">First Name</label>
			<input type="text" class="form-control" id="firstname" placeholder="First Name">
		</div>
		<div class="form-group">
			<label for="lastname">Last Name</label>
			<input type="text" class="form-control" id="lastname" placeholder="Last Name">
		</div>
		  <div class="form-group">
			<label for="email2">Email address</label>
			<input type="email" class="form-control" id="email2" placeholder="Email">
		</div>
		<div class="form-group">
			<label for="password2">Password</label>
			<input type="password" class="form-control" id="password2" placeholder="Password">
		</div>
		<div class="form-group">
  			<label for="sel2">Choose Account Type:</label>
  			<select class="form-control" id="sel2">
    			<option>Patient</option>
    			<option>Physician</option>
  			</select>
		</div>
		</form>
	  </div>
	  <div class="modal-footer">
		<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
		<button type="button" class="btn btn-primary" id="register">Submit</button>
	  </div>
		</div><!-- /.modal-content -->
		</div><!-- /.modal-dialog -->
	</div><!-- /.modal -->

	<div class="row" style="margin-bottom: 10px">
	<center>
	<div class="container" id="physician_options" style="display: none;">
		<button type="button" class="btn btn-default" id="add_patient">Add Patient</button>
		<button type="button" class="btn btn-default" id="remove_patient">Remove Patient</button>
		<button type="button" class="btn btn-default" id="configure_monitor">Configure Patient Monitor</button>
	</div>
	<center>
	</div>
	<div class="row">
	<div class="container">
	<div id="container" style="min-width: 310px; height: 400px; margin: 0 auto">
		
	</div>
	</div>
	</div>
	<div class="row">
	<div class="container">
	<div id="container3" style="min-width: 310px; height: 500px; margin: 0 auto; display: none;">
		
	</div>
	</div>
	</div>
	<div class="row">
	<div class="container">
	<div id="container2" style="min-width: 310px; height: 400px; margin: 0 auto">
		
	</div>
	</div>
	</div>

	</div>
	<!-- /.container -->

	<footer>
	   
	</footer>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
	<script src="https://code.highcharts.com/stock/highstock.js"></script>
	<script src="https://code.highcharts.com/modules/drilldown.js"></script>
	<script src="https://code.highcharts.com/stock/modules/exporting.js"></script>

	<script src="/charts/chart1.js">

	</script>
	<script src="/charts/chart2.js">

	</script>
	<script src="/charts/patientchart1.js">

	</script>
	<script src="/charts/patientchart2.js">

	</script>
	<script src="/charts/patientchart3.js">

	</script>
	<script>
		$('#login').on('click', function (e) {
            var email = document.getElementById("exampleInputEmail1").value;
            var password = document.getElementById("exampleInputPassword1").value;
            var account_type = document.getElementById("sel1").value;
            $.post('/login', { 'email': email, 'password' : password}, 
                function(returnedData){
                     console.log(returnedData);
                     if (returnedData != "error" && returnedData.hasOwnProperty('token')){
                     	if(account_type == "Physician"){
                     	chart1(returnedData.firstname);
                     	chart2(returnedData.firstname);
                     	document.getElementById('physician_options').style = "display: block;";
                     }else{
                     	patientchart1(returnedData.firstname);
                     	patientchart2(returnedData.firstname);
                     	patientchart3(returnedData.firstname);
                     }
                     	$("#myModal .close").click()
                     	$('#nav-login').remove();
                     	$('#nav-register').remove();
                     	document.getElementById('nav-logout').style="display: block;";
                     	document.getElementById('error').innerHTML = "";
                     }else{
                     	document.getElementById('error').innerHTML = "Invalid email or password";
                     }

            });
        });
        $('#register').on('click', function (e) {
        	var firstname = document.getElementById("firstname").value;
        	console.log(firstname);
        	var lastname = document.getElementById("lastname").value;
        	console.log(lastname);
            var email = document.getElementById("email2").value;
            console.log(email);
            var password = document.getElementById("password2").value;
            $.post('/register', { 'firstname': firstname, 'lastname': lastname, 'email': email, 'password' : password}, 
                function(returnedData){
                     console.log(returnedData);
            });
        });
        $('#nav-logout').on('click', function(e){
        	location.reload();
        });
	</script>

</body>

</html>
